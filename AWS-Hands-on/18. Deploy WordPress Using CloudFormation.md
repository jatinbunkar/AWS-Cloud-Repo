# Deploy WordPress Using CloudFormation

### Description
AWS CloudFormation enables users to create and manage an Amazon EC2 with Database predictably and
repeatedly without having to manually create and configure it.
With CloudFormation, users can model complete complex infrastructure and applications in a text file, or template
using easy-to-understand JSON or YAML format.
The objective of this lab is to launch an EC2 (Linux) instance with a full WordPress installation.


### Architecture Diagram
The diagram below displays a visual representation of the application architecture:

<p align="center">
  <img src="https://github.com/jatinbunkar/AWS-Clouds/blob/0a22cd068ace1a6760771de0e8b737ca65058fdd/Screenshots/lab18-s1.png" alt="Screenshot of lab18-s1">
</p>


### Steps:


Follow the steps outlined below to achieve the objective of this lab exercise:
1. Create a CloudFormation Stack
- Upload the below Template file


```yaml
AWSTemplateFormatVersion: '2010-09-09'
Description: Deploy WordPress on an EC2 instance without a MySQL database

Parameters:
  InstanceType:
    Description: EC2 instance type
    Type: String
    Default: t2.micro
    AllowedValues:
      - t2.micro
      - t2.small
      - t2.medium
    ConstraintDescription: Must be a valid EC2 instance type.
  
  KeyName:
    Description: Name of an existing EC2 KeyPair to enable SSH access
    Type: 'AWS::EC2::KeyPair::KeyName'
    ConstraintDescription: Must be the name of an existing EC2 KeyPair.

Resources:
  EC2Instance:
    Type: 'AWS::EC2::Instance'
    Properties: 
      InstanceType: !Ref InstanceType
      KeyName: !Ref KeyName
      ImageId: ami-0182f373e66f89c85  # Amazon Linux 2 AMI (replace based on your region)
      SecurityGroupIds:
        - !Ref InstanceSecurityGroup
      UserData:
        Fn::Base64: !Sub |
          #!/bin/bash
          yum update -y
          yum install -y httpd php php-mysqlnd
          systemctl start httpd
          systemctl enable httpd
          cd /var/www/html
          wget https://wordpress.org/latest.tar.gz
          tar -xzf latest.tar.gz
          cp -r wordpress/* /var/www/html/
          chown -R apache:apache /var/www/html/
          chmod -R 755 /var/www/html/
          systemctl restart httpd
          echo "WordPress installed successfully" > /var/www/html/index.html

  InstanceSecurityGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription: Enable SSH and HTTP access
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: 0.0.0.0/0
        - IpProtocol: tcp
          FromPort: 80
          ToPort: 80
          CidrIp: 0.0.0.0/0

Outputs:
  WebsiteURL:
    Description: The WordPress website URL
    Value: !Sub 'http://${EC2Instance.PublicDnsName}/'
```


