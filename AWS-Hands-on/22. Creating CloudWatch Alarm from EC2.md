# Creating CloudWatch Alarm from EC2


## Lab Steps

Prerequisites:
- Using the AWS Console
- EC2 basics
- Conceptual understanding of the type of metrics typically monitored

Follow the steps outlined below to achieve the objectives of this lab exercise:
1. Navigate to Services > EC2 > Instances.
2. Create a new T2 Micro EC2 instance with default settings.

<img width="1247" alt="image" src="https://github.com/user-attachments/assets/c8d1bf4b-7776-42fe-b796-e83315debc61">


3. Select the Actions , then Monitor Troubleshoot Option > Manage Cloudwatch Alarms

<img width="698" alt="image" src="https://github.com/user-attachments/assets/4c929c50-faf2-4184-a37a-5efabb853b58">

4. Click Actions > Create Status Check Alarm. A Create Alarm dialog is presented so you can configure details of the alarm:
5. Duplicate a new tab and navigate to SNS topic from the console.
6. Select standard >add display name and create topic.

7. Once the topic is created navigate to subscription option and create the subscription.
8. Provide a topic URN name >select protocol as email >and create the subscription.
9. For the Alarm notification, select the SNS topic name and valid email you set up before.
10. Check for an email from AWS Notifications. Open the email and click the Confirm subscription link:

<img width="976" alt="image" src="https://github.com/user-attachments/assets/85d75047-be58-4290-9ffa-345bacdefe07">

11. You should receive a subscription confirmation. (For example, a confirmation message from Amazon Simple Notification Service (SNS) in a new browser tab if using a browser-based email client like
Gmail.) To summarize, you have created a new alarm, along with a new SNS topic. Since you subscribed to this new SNS topic, every time the state of the alarm switches to ALARM you will receive an email. You may not receive an alarm email if the time it took to confirm the SNS topic subscription took longer than the time it took for the alarm to trigger. Emails will only be sent to subscribers at the time of the alarm transition.
12. For the Alarm notification, select the SNS topic name and valid email you set up before.
13. Navigate back to CloudWatch service tab .

Other fields can be kept at their defaults. The Alarm thresholds section uses Status check failed:
either to trigger the alarm for either instance or system status check failures:

<img width="958" alt="image" src="https://github.com/user-attachments/assets/7d0f0989-49dc-4233-b73c-296047268de3">

14. Click Create Alarm when ready. An alarm creation confirmation message is displayed.
15. Click Close. Now you know two different ways to create alarms: one from CloudWatch and the other from EC2 console. Next, you will learn how to attach EC2 actions to alarms.
16. Return to the Alarms page in the CloudWatch console. Notice that the first alarm you created is stuck in the ALARM state.
17. The alarm is stuck in the ALARM state because the instance is running an application that consumes 100% of the CPU utilization. Clearly an indicator that something may have gone wrong with the instance. Imagine that you are managing a production environment and you have an instance that is becoming unavailable intermittently because of high CPU utilization. You would like to receive a notification every time the CPU utilization is high, but this can happen anytime, in the middle of the night, or during a weekend or holiday. It would be helpful to have a pre-defined action in this case -- at least until you find a definitive solution for the problem.

<img width="619" alt="image" src="https://github.com/user-attachments/assets/e345f35c-8cd5-4041-82c6-d182f08e2cc7">

<img width="617" alt="image" src="https://github.com/user-attachments/assets/e38e93c3-cb23-488c-95f5-795b6dcab8a3">


18. To help you address the scenario, you can set EC2 actions on your alarms.
Creation of High CPU alarm:
19. Go to the CloudWatch console and click on Alarms in the left pane:

<img width="1230" alt="image" src="https://github.com/user-attachments/assets/5a8cee97-8d2b-4391-b2eb-1b847284415c">

<img width="1247" alt="image" src="https://github.com/user-attachments/assets/06505ca1-36ad-46b9-a842-52c4077bac01">

20. Click Edit and define SNS

<img width="836" alt="image" src="https://github.com/user-attachments/assets/6b5a0c8e-9908-4b08-8f64-3e1f55294e9c">

21. We can define EC2 Actions , for this lab we are skipping that

<img width="624" alt="image" src="https://github.com/user-attachments/assets/d42e877c-24f5-489a-a854-d7784ddfc25e">



