# **Creating and Connecting to an Aurora Serverless Database via AWS CLI from an EC2 Instance**

## **Description**
In this lab, you will create an Aurora Serverless DB cluster using the AWS CLI on an EC2 instance. You will store the master username and password in AWS Secrets Manager and connect to the cluster using the RDS Data API.

## **Lab Steps**

### **Set Up the EC2 Instance**
   
1. Navigate to the EC2 service in the AWS Management Console.
2. Create an Amazon Linux 2 instance with the following details:
   -   Instance type: t2.micro(Can select any)
   -   IAM role: Attach an IAM role with AmazonRDSFullAccess and SecretsManagerReadWrite permissions,ssmmanagedinstancecore.
3. Save the Key Pair and SSH into the EC2 instance using the key pair or connect using AWS Session Manager.
4. Update the instance:

<img width="1205" alt="image" src="https://github.com/user-attachments/assets/ad79a438-8569-4474-8bef-f313c134c19d">

-      sudo yum update -y

### **Create the Aurora Serverless DB Cluster**

1. Create a new DB subnet group:
2. Go to the RDS console and create a new DB subnet group.
3. Add a name for the subnet group, select two availability zones, and add one subnet for each zone.
4. Run the following AWS CLI command to create the Aurora DB cluster, replacing `dbclustername`, `subnetgroupname`, `username`, and `password` with your values:

```bash
aws rds create-db-cluster \
  --engine-version 5.6.10a \
  --db-cluster-identifier <dbclustername> \
  --engine-mode serverless \
  --engine aurora \
  --master-username <username> \
  --master-user-password <password> \
  --db-subnet-group-name <subnetgroupname> \
  --scaling-configuration MinCapacity=1,MaxCapacity=2,AutoPause=false,TimeoutAction=ForceApplyCapacityChange \
  --enable-http-endpoint \
  --region us-east-2
```

<img width="620" alt="image" src="https://github.com/user-attachments/assets/7757cadb-1452-40c1-97c3-74d64946abf2">

aws rds create-db-cluster \
> --engine-version 5.6.10a \
> --db-cluster-identifier jbdbcluster \
> --engine-mode serverless \
> --engine aurora \
> --master-username admin \



