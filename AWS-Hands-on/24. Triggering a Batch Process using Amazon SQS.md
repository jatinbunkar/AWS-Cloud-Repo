# Triggering a Batch Process using Amazon SQS

## Description

Most of the Batch Processes on AWS can be handled using AWS Batch. This is an alternative to the AWS Batch Service. In order to organize the huge number of processes, a Queue is used to streamline the flow of processes
for better consumption. In this lab exercise, one such process (uploading a file to S3) is processed by Lambda via SQS.

### **Objective**
Create a batch processing system where a file uploaded to an S3 bucket sends a message to an SQS queue, which is then processed by a Lambda function.


---

### **Architecture Diagram**

The diagram below displays a visual representation of the application architecture:

<img width="479" alt="image" src="https://github.com/user-attachments/assets/e5d2a141-6c60-44f7-a76d-a742690c3db5">


### **Steps to Implement**

### 1. **Create an S3 Bucket**
- Open the AWS Management Console and navigate to the **S3** service.
- Click on **Create bucket**.
- Provide a **unique name** for the bucket and choose a region.
- Keep other settings as default or adjust as needed.
- Click **Create bucket**.


<img width="1180" alt="image" src="https://github.com/user-attachments/assets/08b30f96-13ad-4dc4-82ee-3a829e5a7197">


---

### 2. **Create an SQS Queue**
- Go to the **Amazon SQS** service in the AWS Console.
- Click on **Create queue**.
- Choose **Standard queue**.
- Enter a name for the queue.
- Configure other settings if needed and click **Create queue**.

<img width="1055" alt="image" src="https://github.com/user-attachments/assets/0b4bd121-50eb-4d6e-a3fe-c2bd612421b1">

<img width="1408" alt="image" src="https://github.com/user-attachments/assets/9fb04b0f-ba8e-4e90-b822-234cfb6f278f">



---

### 3. **Edit the Access Policy of SQS Queue**
- Go to your created SQS queue and select it.
- Click on the **Permissions** tab.
- Choose **Edit** under the Access Policy section.
- Copy and paste the following policy, replacing `<YOUR-BUCKET-NAME>`, `<AWS-ACCOUNT-ID>`, and `<region>`:


```json
{
  "Version": "2012-10-17",
  "Id": "PolicyForS3ToSQS",
  "Statement": [
    {
      "Sid": "AllowS3ToSendMessage",
      "Effect": "Allow",
      "Principal": {
        "Service": "s3.amazonaws.com"
      },
      "Action": "sqs:SendMessage",
      "Resource": "arn:aws:sqs:<region>:<AWS-ACCOUNT-ID>:<Queue-Name>",
      "Condition": {
        "ArnLike": {
          "aws:SourceArn": "arn:aws:s3:::<YOUR-BUCKET-NAME>"
        }
      }
    }
  ]
}

```

