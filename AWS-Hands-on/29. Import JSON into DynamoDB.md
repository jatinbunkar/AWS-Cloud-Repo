# **Import JSON into DynamoDB**

## Description
In this lab exercise, we will create an EC2 instance and by using AWS CLI in instance, we will create and interact
with DynamoDB table by using the JSON files as schema and input as well.

## Architecture Diagram
The diagram below displays a visual representation of the application architecture:

<img width="809" alt="image" src="https://github.com/user-attachments/assets/69ae5d93-0663-4ab9-a290-3e1328bf6b1f">

## Lab Steps

Follow the steps outlined below to achieve the objective of this lab exercise:
1. Navigate to the EC2 service in AWS console.
2. Create an Amazon Linux 2 instance with type as t2.micro and attach the required role. (Below Policy are required to work with Dynamodb)

```json
"dynamodb:CreateTable",
"dynamodb:DescribeTable",
"dynamodb:DeleteTable",
"dynamodb:PutItem",
"dynamodb:Scan"
```

3. Save the Key Pair and SSH into the instance using the key pair or the Session Manager.

4. Update the instance using the following command:

        sudo yum update -y

5. Use the below command to create a json file which we will use as a schema for creating the table.

        sudo nano tableschema.json

6. Copy and paste the below content there and replace <TABLE_NAME> with your preferred table name.

```json
{
  "AttributeDefinitions": [
    {
      "AttributeName": "Artist",
      "AttributeType": "S"
    },
    {
      "AttributeName": "SongTitle",
      "AttributeType": "S"
    }
  ],
  "TableName": "YourTableName", 
  "KeySchema": [
    {
      "AttributeName": "Artist",
      "KeyType": "HASH"
    },
    {
      "AttributeName": "SongTitle",
      "KeyType": "RANGE"
    }
  ],
  "ProvisionedThroughput": {
    "ReadCapacityUnits": 5,
    "WriteCapacityUnits": 5
  }
}

```

<img width="903" alt="image" src="https://github.com/user-attachments/assets/b0573aba-5dfd-4326-809a-92f6dc20fd05">


7. Once it is in nano, you can close out by typing CTRL+X and when it requires you to save, press the Y key.
8. It prompts for the file name, and it should already be populated when you opened nano. Press the
enter/return key.
9. Use the following command to create the table.

        aws dynamodb create-table --cli-input-json file://tableschema.json --region us-east-2

<img width="800" alt="image" src="https://github.com/user-attachments/assets/9f0031d1-49b2-46b4-97d2-7ad404383bc6">

- To Check Status
-         aws dynamodb describe-table --table-name JatinTable --region us-east-2

<img width="687" alt="image" src="https://github.com/user-attachments/assets/acec0dcb-b208-48a8-a400-c8a2db0f691d">
        

10. Use the following command to create a json file which we will use as a schema for creating the table.

        sudo nano items.json

11. Copy and paste the following content:

```json
{
  "Artist": { "S": "Arijit Singh" },
  "SongTitle": { "S": "Aayat" }
}
    
```
<img width="399" alt="image" src="https://github.com/user-attachments/assets/ede0f4d8-99bc-41a5-aa91-81b70b6bbb4d">



12. Once it is in nano, you can close out by typing CTRL+X and when it requires you to save, press the Y key.
13. It prompts for the file name, and it should already be populated from when you opened nano. Press the enter/return key.
14. Use the following command to put items into the table:
    
```bash
aws dynamodb put-item \
        --table-name MusicCollection \
        --item file://items.json \
        --region us-east-2
```
<img width="979" alt="image" src="https://github.com/user-attachments/assets/75217123-d141-4415-84ea-290403654445">

15. To check the data present in the table

        aws dynamodb scan --table-name YourTableName --region us-east-2


<img width="727" alt="image" src="https://github.com/user-attachments/assets/012845fc-7320-4c5f-a10c-545d4a6d933f">

```bash


    "Items": [
        {
            "Artist": {
                "S": "Arijit Singh"
            },
            "SongTitle": {
                "S": "Aayat"
            }
        }
    ],
    "Count": 1,
    "ScannedCount": 1,
    "ConsumedCapacity": null
}
```


Similarly you can perform many actions using CLI.

## **Supporting References**
Refer the below links for additional information:
1. [CLI-dynamodb](https://docs.aws.amazon.com/cli/latest/reference/dynamodb/put-item.html)
2. [Dynamodb](https://aws.amazon.com/dynamodb/)
