# **Introduction to the Application Load Balancer**

## **Description**

An Application Load Balancer functions at the application layer, the seventh layer of the Open Systems Interconnection (OSI) model. After the load balancer receives a request, it evaluates the listener rules in priority order to determine which rule to apply, and then selects a target from the target group for the rule action. Although the Network Load Balancer is faster, the Application Load Balancer offers the greatest number of features due to its ability to make decisions based on the Application Layer (layer 7 of the OSI model), and supports content-based routing, container support, and application monitoring. This allows your Application Load Balancer to route traffic more intelligently between your instances.

In this lab exercise, you will create an Application Load Balancer and a Target Group, which will be attached to an existing Auto Scaling Group. This will prepare you to deploy your own ALBs within your applications at layer 7.

## **Architecture Diagram**

The diagram below displays a visual representation of the application architecture:

<img width="714" alt="image" src="https://github.com/user-attachments/assets/601d205d-53da-4b20-9f2b-d79f532ec198">

## **Lab Steps**

Follow the steps outlined below to achieve the objective of this lab exercise:

### 1. Log in to AWS Console with the credentials provided.

### 2. Create and Configure an Application Load Balancer:
   - Go to **EC2 Service**.
   - Scroll down and click on **Load Balancers** to create a load balancer.
   - Choose **Application Load Balancer**.
   - Provide the following details:
      - **Name:** Specify a name.
      - **Scheme:** Select **Internet-facing**.
      - Under **Availability Zones**, choose a default VPC.
      - Select the **Availability Zones** or subnets you want your load balancer to work in.
      - Click on **Next: Configure Security Settings**.

<img width="879" alt="image" src="https://github.com/user-attachments/assets/a252ac72-4b1b-4b94-aedb-38bd2d4313e0">

<img width="833" alt="image" src="https://github.com/user-attachments/assets/eeb29dc1-61ca-4078-a592-3c1cc9400d27">

   - Assign a Security Group to control traffic to the load balancer:
      - **Security group name:** Specify a name.
      - **Type:** HTTP
      - **Port:** 80
      - **Source:** 0.0.0.0/0
      - Click on **Next: Configure Routing**.


   - Specify the target group to route all requests to this target:
      - **Target group name:** Provide a name for the target group.
      - Ensure that **Health checks** are set on port 80 with HTTP protocol.
      - Leave other settings at their default values, then click **Next: Register targets**.
      - No need to register targets now, as attaching this load balancer to the auto-scaling group will automatically attach the target group.

<img width="887" alt="image" src="https://github.com/user-attachments/assets/2798b599-5cb9-46f9-8034-a70ce695c29b">

   - Click on **Next: Review**, review the configuration, and click on **Create**. The Load Balancer is now ready to use.

<img width="832" alt="image" src="https://github.com/user-attachments/assets/c707e8d0-bd65-4582-b07b-b12c0fb72c33">

<img width="1230" alt="image" src="https://github.com/user-attachments/assets/75c1b4dd-2d07-4662-bf51-c4a4610d59a8">


### 3. Create and Configure an Auto Scaling Group

As the auto-scaling group will create instances automatically, specify the instance configuration by creating a launch configuration.

   - Choose the AMI as **Linux server-II** and click **Next**.
   - Select the **Instance type:** t2.micro and click **Next**.
   - Specify a **name** for the configuration.
   - Under **Advanced settings**, select **User Data** as text. Enter the following to install the HTTPD server:

      ```bash
      #!/bin/bash
      yum update -y
      yum install httpd -y
      service httpd start
      chkconfig httpd
      ```

   - Leave storage settings to default and click **Next**.
   - Create a new security group:
      - **Security group name:** Specify a name.
      - **Type:** HTTP
      - **Port:** 80
      - **Source:** Custom IP, and choose the security group created for the load balancer.
   - Click on **Launch**, select **Create a new key pair**, and download it.
   - Click on **Create launch configuration**.

<img width="1045" alt="image" src="https://github.com/user-attachments/assets/73e375bf-bd78-49a1-b69e-4538b821ff6a">

<img width="1045" alt="image" src="https://github.com/user-attachments/assets/514703f4-d6b6-4416-83f6-78220d166232">

   - Use this launch configuration to create the auto-scaling group:
      - **Group name:** Specify a name.
      - **Group size:** 2 instances.
      - **Network:** Choose the default network.
      - Add available subnets for multi-region availability.
      - In **Advanced Details**, check **Receive traffic from load balancer**.
         - **Target Group:** Select the target group.
         - **Health check type:** ELB
      - Under **Configure Scaling Policies**, select **Use scaling policies to adjust the capacity of this group**.
         - Set to scale between 1 and 3 instances based on **CPU usage at 80%**.
      - Click on **Review**, then **Create Auto Scaling Group**.

